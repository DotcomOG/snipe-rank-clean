<!-- analyze.html â€” Updated 2025-06-10 @ 2:45 PM ET -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI SEO Analysis</title>
  <style>
    body {
      font-family: Helvetica, sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: white;
      color: black;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .section {
      margin-bottom: 2.5rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .centered {
      text-align: center;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    li {
      margin-bottom: 1.5rem;
      line-height: 1.6;
      font-size: 1rem;
    }
    .row-line {
      text-align: center;
      font-weight: bold;
      font-size: 1rem;
      margin-bottom: 1.5rem;
    }
    input {
      display: block;
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      font-size: 1rem;
    }
    button {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      background-color: black;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #333;
    }
  </style>
</head>
<body>
  <h1>ðŸ¤– SnipeRank</h1>
  <h2>AI SEO Analyzer ðŸ¤–</h2>

  <div id="loading" class="centered">SnipeRank is analyzing. It may take up to a minute...</div>

  <div id="results" style="display: none;">

    <div class="section">
      <div class="row-line">ðŸ”— Tested URL: <span id="page-url"></span></div>
    </div>

    <div class="section centered">
      <h3>ðŸ“Š Overall Score</h3>
      <p id="overall-score" style="font-size: 2rem; font-weight: bold;"></p>
    </div>

    <div class="section">
      <h3>âœ… Whatâ€™s Working</h3>
      <ul id="ai-strengths"></ul>
    </div>

    <div class="section">
      <h3>ðŸš¨ Needs Attention</h3>
      <ul id="ai-opportunities"></ul>
    </div>

    <div class="section">
      <h3>ðŸ§  AI Engine Insights</h3>
      <ul id="ai-insights"></ul>
    </div>

    <div class="section">
      <h3 class="centered">ðŸ“© Request Your Full Report</h3>
      <form id="contact-form" class="centered">
        <input type="text" id="name" name="name" placeholder="Your Full Name" required>
        <input type="email" id="email" name="email" placeholder="Your Email Address" required>
        <input type="text" id="phone" name="phone" placeholder="Your Phone Number (Optional)">
        <input type="text" id="company" name="company" placeholder="Company / Organization (Optional)">
        <button type="submit">Get Full Report</button>
      </form>
    </div>
  </div>

  <script>
    async function runAnalysis() {
      const params = new URLSearchParams(window.location.search);
      const url = params.get("url");
      const name = params.get("name") || "";
      const email = params.get("email") || "";

      if (!url) {
        document.getElementById("loading").textContent = "No URL provided.";
        return;
      }

      document.getElementById("page-url").textContent = decodeURIComponent(url);
      document.getElementById("name").value = decodeURIComponent(name);
      document.getElementById("email").value = decodeURIComponent(email);

      try {
        const res = await fetch(`https://snipe-rank-clean.onrender.com/friendly?url=${encodeURIComponent(url)}`);
        const data = await res.json();

        if (!data.success) {
          document.getElementById("loading").textContent = "Analysis failed. Please try again.";
          return;
        }

        document.getElementById("overall-score").textContent = data.score;

        const strengths = data.ai_strengths || [];
        const opportunities = data.ai_opportunities || [];
        const insights = data.engine_insights || [];

        const strengthsList = document.getElementById("ai-strengths");
        strengths.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          strengthsList.appendChild(li);
        });

        const opportunitiesList = document.getElementById("ai-opportunities");
        opportunities.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          opportunitiesList.appendChild(li);
        });

        const insightsList = document.getElementById("ai-insights");
        insights.forEach(insight => {
          const li = document.createElement("li");
          li.textContent = insight;
          insightsList.appendChild(li);
        });

        document.getElementById("loading").style.display = "none";
        document.getElementById("results").style.display = "block";

      } catch (err) {
        console.error(err);
        document.getElementById("loading").textContent = "Error fetching analysis.";
      }
    }

    document.getElementById("contact-form").addEventListener("submit", function (e) {
      e.preventDefault();
      const url = new URLSearchParams(window.location.search).get("url") || "";
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const company = document.getElementById("company").value;

      const redirectURL = `full-report.html?url=${encodeURIComponent(url)}&name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}&phone=${encodeURIComponent(phone)}&company=${encodeURIComponent(company)}`;
      window.location.href = redirectURL;
    });

    runAnalysis();
  </script>
</body>
</html>
