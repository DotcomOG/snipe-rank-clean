<!-- analyze.html â€” Updated 2025-06-10 @ 1:30 PM ET -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI SEO Analysis</title>
  <style>
    body {
      font-family: Helvetica, sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: white;
      color: black;
    }
    h1, h2, h3 {
      text-align: center;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    li {
      margin-bottom: 1rem;
      line-height: 1.5;
      font-size: 1rem;
    }
    .section {
      margin-bottom: 3rem;
    }
    .loading {
      text-align: center;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>
  <h1>ðŸ¤– SnipeRank</h1>
  <h2>AI SEO Analyzer ðŸ¤–</h2>

  <div id="loading" class="loading">SnipeRank is analyzing. It may take up to a minute...</div>
  <div id="results" style="display: none;">

    <div class="section">
      <h3>ðŸ”— URL</h3>
      <p id="page-url"></p>
    </div>

    <div class="section">
      <h3>ðŸ“Š Overall Score</h3>
      <p id="overall-score"></p>
    </div>

    <div class="section">
      <h3>âœ… What's Working</h3>
      <ul id="ai-strengths"></ul>
    </div>

    <div class="section">
      <h3>ðŸš¨ What Needs Attention</h3>
      <ul id="ai-opportunities"></ul>
    </div>

    <div class="section">
      <h3>ðŸ§  AI Engine Insights</h3>
      <ul id="ai-insights"></ul>
    </div>
  </div>

  <script>
    async function runAnalysis() {
      const params = new URLSearchParams(window.location.search);
      const url = params.get("url");

      if (!url) {
        document.getElementById("loading").textContent = "No URL provided.";
        return;
      }

      document.getElementById("page-url").textContent = decodeURIComponent(url);

      try {
        const res = await fetch(`https://snipe-rank-clean.onrender.com/friendly?url=${encodeURIComponent(url)}`);
        const data = await res.json();

        if (!data.success) {
          document.getElementById("loading").textContent = "Analysis failed. Please try again.";
          return;
        }

        document.getElementById("overall-score").textContent = data.score;

        const strengths = data.ai_strengths || [];
        const opportunities = data.ai_opportunities || [];
        const insights = data.engine_insights || [];

        const strengthsList = document.getElementById("ai-strengths");
        strengths.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          strengthsList.appendChild(li);
        });

        const opportunitiesList = document.getElementById("ai-opportunities");
        opportunities.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          opportunitiesList.appendChild(li);
        });

        const insightsList = document.getElementById("ai-insights");
        insights.forEach(insight => {
          const li = document.createElement("li");
          li.textContent = insight;
          insightsList.appendChild(li);
        });

        document.getElementById("loading").style.display = "none";
        document.getElementById("results").style.display = "block";

      } catch (err) {
        console.error(err);
        document.getElementById("loading").textContent = "Error fetching analysis.";
      }
    }

    runAnalysis();
  </script>
</body>
</html>
